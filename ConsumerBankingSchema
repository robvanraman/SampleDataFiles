
--This table has the customer and their payment info
CREATE TABLE Customer (
ACCNO VARCHAR(10) NOT NULL, unique id,  --Credit card no, card no, debt identifier
NAME VARCHAR(50), --NAME OF THE CUSTOMER, BORROWER, CARD HOLDER
CITY VARCHAR(50),
OUTSTANDING VARCHAR(50) DEFAULT NULL,  -- Description, full name
CREDITLINE decimal (10,2) DEFAULT NULL,   ----CREDITLIMIT, APPROVED AMOUNT
COLLATERAL boolean --  ANY HARD OR SOFT ASSET THAT CAN BE COVER FOR THE CREDIT LINE
LASTPAYMENT DATETIME,  -LAST PAYMENT, LAST EMI
BROKENPROMISES int,    --CONTACTED BY CUSTOMER CARE FOR PAYMENTS, PROMOSED A DATE
LASTCONTACT DATETIME,
ADJUSTLIMIT boolen,
PRIMARY KEY (ACCNO),
)



--Show me the trend of customers by city who entered final delinquency today?
SELECT CITY, COUNT(*) FROM Customer WHERE DATEDIFF(LASTPAYMENT, getdate(), 99) >= 99
GROUP BY CITY

--How many of them did we reach out for credit line adjustment?
SELECT CITY, COUNT(*) FROM Customer WHERE DATEDIFF(LASTPAYMENT, getdate(), 99) >= 99 and lastcontact = getdate()
GROUP BY CITY

--How many of them agreed on cedit line adjustment or payment re -tructuring?
SELECT CITY, COUNT(*) FROM Customer WHERE DATEDIFF(LASTPAYMENT, getdate(), 99) >= 99 and lastcontact = getdate() and adjustlimit = true
GROUP BY CITY
